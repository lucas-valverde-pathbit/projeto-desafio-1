2025-02-10 11:40:05.257 -03:00 [ERR] Failed executing DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-02-10 11:40:05.305 -03:00 [INF] No migrations were found in assembly 'Infrastructure'. A migration needs to be added before the database can be updated.
2025-02-10 11:40:05.549 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-10 11:40:05.561 -03:00 [INF] No migrations were applied. The database is already up to date.
2025-02-10 11:47:30.094 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-02-10 11:47:30.297 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-02-10 11:47:30.307 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-10 11:47:30.310 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-02-10 11:47:30.315 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-02-10 11:47:30.323 -03:00 [INF] Applying migration '20250210144703_InitialCreate'.
2025-02-10 11:47:30.631 -03:00 [INF] Executed DbCommand (287ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Customers" (
    "Id" uuid NOT NULL,
    "CustomerName" text,
    "CustomerEmail" text,
    CONSTRAINT "PK_Customers" PRIMARY KEY ("Id")
);
2025-02-10 11:47:30.639 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Products" (
    "Id" uuid NOT NULL,
    "ProductName" text NOT NULL,
    "ProductDescription" text NOT NULL,
    "ProductPrice" numeric NOT NULL,
    "ProductStockQuantity" integer NOT NULL,
    CONSTRAINT "PK_Products" PRIMARY KEY ("Id")
);
2025-02-10 11:47:30.646 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" uuid NOT NULL,
    "UserEmail" text,
    "UserPassword" text,
    "Role" text NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-02-10 11:47:30.682 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "OrderDate" timestamp with time zone NOT NULL,
    "CustomerId" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "DeliveryAddress" text,
    "Status" integer NOT NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Customers_CustomerId" FOREIGN KEY ("CustomerId") REFERENCES "Customers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Orders_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-02-10 11:47:30.698 -03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OrderItems" (
    "Id" uuid NOT NULL,
    "OrderId" uuid NOT NULL,
    "ProductId" uuid NOT NULL,
    "OrderItemQuantity" integer NOT NULL,
    "OrderItemPrice" numeric NOT NULL,
    CONSTRAINT "PK_OrderItems" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_OrderItems_Orders_OrderId" FOREIGN KEY ("OrderId") REFERENCES "Orders" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_OrderItems_Products_ProductId" FOREIGN KEY ("ProductId") REFERENCES "Products" ("Id") ON DELETE CASCADE
);
2025-02-10 11:47:30.707 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_OrderId" ON "OrderItems" ("OrderId");
2025-02-10 11:47:30.712 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_ProductId" ON "OrderItems" ("ProductId");
2025-02-10 11:47:30.717 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_CustomerId" ON "Orders" ("CustomerId");
2025-02-10 11:47:30.721 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_UserId" ON "Orders" ("UserId");
2025-02-10 11:47:30.727 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250210144703_InitialCreate', '9.0.1');

